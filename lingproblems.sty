%The MIT License (MIT)
%
%Copyright (c) 2020 Michał Boroń
%
%Permission is hereby granted, free of charge, to any person obtaining a copy
%of this software and associated documentation files (the "Software"), to deal
%in the Software without restriction, including without limitation the rights
%to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
%copies of the Software, and to permit persons to whom the Software is
%furnished to do so, subject to the following conditions:
%
%The above copyright notice and this permission notice shall be included in all
%copies or substantial portions of the Software.
%
%THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
%IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
%FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
%AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
%LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
%OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
%SOFTWARE.

% TeX class providing formatting linguistic problems for linguistic contests or single problems
% The format is based on the format used at the International Linguistics Olympiad


\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{lingproblems}[2020/05/02 Linguistic problems]

% how the title of each problem should be printed

\RequirePackage{gb4e}
\RequirePackage{amsmath}
\RequirePackage{enumitem}

% for the danger symbol
\newcommand*{\TakeFourierOrnament}[1]{{%
\fontencoding{U}\fontfamily{futs}\selectfont\char#1}}
\newcommand*{\danger}{\TakeFourierOrnament{66}}

% a command for placing the name of the problem as a new section
\newcommand{\placename}[1]{\section*{\large #1}}%

%---------------------------------------------------------------

% new problem
\newenvironment{lingproblem}[2]{

% assign the problem name and the author
\newcommand{\title@}{#1}
\newcommand{\author@}{#2}

% new unindexed section with the name of the problem
\placename{\title@}


% add language info
\newenvironment{langinfo}
{\noindent \danger \: }
{\hspace*{\fill} \text{---\textit{\author@}}}
{}


% add language info without an author
\newenvironment{langinfo*}
{\noindent \danger \: }
{}
{}


% add tasks
\newenvironment{tasks}
{\begin{enumerate}[label={\textbf{(\alph*)}}]}
{\end{enumerate}}
% task with points as the second arg
\newcommand{\taskp}[2]{\item ##1 \hspace*{\fill}[\textit{##2}]}
% task without points
\newcommand{\task}[1]{\item ##1}

}{}
% END problem

%---------------------------------------------------------------

% new problem without title
\newenvironment{lingproblem*}[1]{

% assign the problem's the author
\newcommand{\author@}{#1}


% add language info
\newenvironment{langinfo}
{\noindent \danger \: }
{\hspace*{\fill} \text{---\textit{\author@}}}
{}


% add language info without an author
\newenvironment{langinfo*}
{\noindent \danger \: }
{}
{}

% add tasks
\newenvironment{tasks}
{\begin{enumerate}[label={\textbf{(\alph*)}}]}
{\end{enumerate}}
% task with points as the second arg
\newcommand{\taskp}[2]{\item ##1 \hspace*{\fill}[\textit{##2}]}
% task without points
\newcommand{\task}[1]{\item ##1}

}{}
% END problem without title
